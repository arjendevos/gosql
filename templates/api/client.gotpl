// Generated by gosql: DO NOT EDIT.
package {{ .PackageName}}

import (
	"context"
	"database/sql"
)

type Client struct {
	db  *sql.DB
	ctx context.Context
}

type Controllers struct {
	{{- if hasAuthFields .AuthFields}}
		Auth *AuthController
	{{- if hasOauth2 .Controllers}}
		Oauth2 *Oauth2Controller
	{{- end}}
	{{- end}}
    {{ range $controller := .Controllers }}
        {{ .CamelName }} *{{ .CamelName }}Controller
    {{- end }}
}

func NewClient(db *sql.DB) *Controllers {
	ctx := context.Background()
	client := &Client{db: db, ctx: ctx}
	return &Controllers{
		{{- if hasAuthFields .AuthFields}}
			Auth: &AuthController{client},
			{{- if hasOauth2 .Controllers}}
				Oauth2: &Oauth2Controller{client},
			{{- end}}
		{{- end}}
		
        {{ range $controller := .Controllers }}
            {{ .CamelName }}: &{{ .CamelName }}Controller{client},
        {{- end }}
	}
}

